CREATE SCHEMA campo;
USE campo;

CREATE TABLE Condicion_Fiscal(
id_condicion_fiscal INT NOT NULL PRIMARY KEY,
Condicion_fiscal VARCHAR (50) NOT NULL,
Descripcion VARCHAR (200) DEFAULT NULL
);

CREATE TABLE Clase_de_animal(
id_clase INT NOT NULL PRIMARY KEY,
CLASE VARCHAR (50) NOT NULL,
Descripcion VARCHAR (200) DEFAULT NULL
);


CREATE TABLE clasificacion(
ID_Clasificacion INT NOT NULL PRIMARY KEY,
clasificacion VARCHAR (40)
);

CREATE TABLE Categoria_de_animal(
id_categoria INT NOT NULL PRIMARY KEY,
Categoria VARCHAR (50),
Descripcion VARCHAR (200)
);


CREATE TABLE Suplementos(
ID_suplementos INT NOT NULL PRIMARY KEY,
SUPLEMENTO VARCHAR (50)
);

create table tipo_de_animal(
ID_tipo_de_nimal int NOT NULL PRIMARY KEY,
tipo VARCHAR (25)
);


CREATE TABLE animales(
ID_ANIMAL INT NOT NULL PRIMARY KEY,
NR_CARAVANA VARCHAR (40),
CLASIFICACION VARCHAR (20) NOT NULL
);


CREATE TABLE PROVEEDORES(
ID_PROVEEDOR INT  NOT NULL PRIMARY KEY,
CUIT VARCHAR (13) NOT NULL, 
NOMBRE VARCHAR (50),
APELLIDO VARCHAR (50) NOT NULL,
DIRECCION VARCHAR (100), 
TELEFONO VARCHAR (100),
EMAIL VARCHAR (100),
ID_CONDICION_FISCAL INT  NOT NULL -- foreign key
);	


CREATE TABLE PADRES (
ID_PADRES INT NOT NULL PRIMARY KEY,
NUMERO_CARABANA VARCHAR (20) NOT NULL,
CLASE INT , -- foreign key
CATEGORIA INT NOT NULL, -- foreign key
ID_PROVEEDOR INT NOT NULL, -- foreign key
DESCRIPCION VARCHAR (50),
FEHCA_INGRESO DATE NOT NULL,
COSTO decimal (11,2) NOT NULL,
FECHA_EGRESO DATE,
PRECIO_VENTA DECIMAL (11,2),
MOTIVO_EGRESO VARCHAR (50)
);


CREATE TABLE MADRES (
ID_MADRES INT NOT NULL PRIMARY KEY,
NUMERO_CARABANA VARCHAR (20) NOT NULL,
CLASE INT, -- FOREIGN KEY
CATEGORIA INT NOT NULL, -- FOREIGN KEY
ID_PROVEEDOR INT NOT NULL, -- FOREIGN KEY
COMENTARIO VARCHAR (50),
FEHCA_INGRESO DATE NOT NULL,
COSTO DECIMAL (11,2) NOT NULL,
FECHA_EGRESO DATE,
PRECIO_VENTA DECIMAL (11,2),
MOTIVO_EGRESO VARCHAR (50)
);


CREATE TABLE CLIENTES (
ID_CLIENTES INT NOT NULL PRIMARY KEY,
CUIT VARCHAR(13) NOT NULL, 
NOMBRE VARCHAR(20),
APELLIDO VARCHAR(20) NOT NULL,
DIRECCION VARCHAR(45),
TELEFONO INT,
EMAIL VARCHAR(30),
ID_CONDICION_FISCAL INT NOT NULL
);


CREATE TABLE CRIAS (
ID_CRIAS INT  NOT NULL PRIMARY KEY,
NUMERO_CARABANA VARCHAR (20) NOT NULL,
CLASE INT NOT NULL, -- FOREIGN KEY
CATEGORIA INT NOT NULL, -- FOREIGN KEY
ID_PROVEEDOR INT NOT NULL, -- FOREIGN KEY
ID_MADRE INT NOT NULL, -- FOREIGN KEY
COMENTARIO VARCHAR (90), 
FECHA_INGRESO DATE NOT NULL,
COSTO DECIMAL(11,2),
FECHA_DESTETE DATE,
PESO_DESTETE DECIMAL(11,2),
FECHA_ENTRADA_ENGORDE DATE,
PESO_ENTRADA_ENGORDE DECIMAL(11,2),
SUPLEMENTOS INT NOT NULL, -- FOREIGN KEY
MOTIVO_EGRESO VARCHAR (90)
);

Create table facturas(
ID_VENTA INT NOT NULL PRIMARY KEY,
ID_CLIENTE INT NOT NULL,
FECHA DATE NOT NULL,
MONTO_TOTAL decimal (10,2)
);


CREATE TABLE DETALLE_factura(
ID_VENTA INT,
ID_ANIMAL INT unique
);

ALTER TABLE DETALLE_VENTAS
ADD CONSTRAINT CLAVE_PRIMARIA
PRIMARY KEY (ID_VENTA,ID_ANIMAL),
ADD CONSTRAINT IDVENTA_DETALLEVENTA
FOREIGN KEY (ID_VENTA) REFERENCES VENTAS (ID_VENTA),
ADD CONSTRAINT IDANIMAL_IDDETALLEVENTA
FOREIGN KEY (ID_ANIMAL) REFERENCES animales (ID_ANIMAL);

ALTER TABLE Proveedores
ADD CONSTRAINT fk_proveedores_condicionfiscal
foreign key(ID_CONDICION_FISCAL) REFERENCES Condicion_Fiscal (id_condicion_fiscal);

ALTER TABLE CLIENTES
ADD CONSTRAINT FK_CLIENTES_IDCONDICIONFISCAL
FOREIGN KEY (ID_CONDICION_FISCAL) REFERENCES Condicion_Fiscal (id_condicion_fiscal);


ALTER TABLE PADRES
ADD CONSTRAINT FK_ANIMAL
FOREIGN KEY (ID_PADRES) REFERENCES animales (ID_ANIMAL),
ADD CONSTRAINT FK_clase_IDclase
FOREIGN KEY (CLASE) REFERENCES Clase_de_animal (id_clase),
ADD CONSTRAINT FK_CATEGORIA_IDcategoria
FOREIGN KEY (CATEGORIA) REFERENCES Categoria_de_animal (id_categoria),
ADD CONSTRAINT FK_VENDEDOR
foreign key(ID_PROVEEDOR) REFERENCES PROVEEDORES (ID_PROVEEDOR);


ALTER TABLE MADRES
ADD CONSTRAINT FK_ANIMAL_MADRE
FOREIGN KEY (ID_MADRES) REFERENCES animales (ID_ANIMAL),
ADD CONSTRAINT FK_CLASEM_IDCLASE
FOREIGN KEY (CLASE) REFERENCES Clase_de_animal (id_clase),
ADD CONSTRAINT FK_CATEGORIAM_IDCATEGORIA
FOREIGN KEY (CATEGORIA) REFERENCES Categoria_de_animal (id_categoria),
ADD CONSTRAINT FK_PROVEEDORM_IDPROVEDOR
foreign key (ID_PROVEEDOR) REFERENCES proveedores (ID_PROVEEDOR);


ALTER TABLE CRIAS
ADD CONSTRAINT FK_ANIMAL_CRIA
FOREIGN KEY (ID_CRIAS) REFERENCES animales (ID_ANIMAL),
ADD CONSTRAINT FK_CLASEC_IDdCLASES
FOREIGN KEY (CLASE) REFERENCES Clase_de_animal (id_clase),
ADD CONSTRAINT FK_CATEGORIAC_IDCATEGORIA
FOREIGN KEY (CATEGORIA) REFERENCES Categoria_de_animal (id_categoria),
ADD CONSTRAINT FK_PROVEEDORC_IDPROVEDOR
foreign key (ID_PROVEEDOR) REFERENCES PROVEEDORES (ID_PROVEEDOR),
ADD CONSTRAINT FK_MADREC_IDMADRE
FOREIGN KEY (ID_MADRE) REFERENCES MADRES (ID_MADRES),
ADD CONSTRAINT FK_SUPLEMENTOSC_IDSUPLEMTOS
FOREIGN KEY (SUPLEMENTOS) REFERENCES SUPLEMENTOS (ID_suplementos);


